# DataBase(데이터베이스)

</br>

## 데이터베이스 vs 파일 시스템

### 파일 시스템(File System)

- data의 정의가 Application Program에 내포한다.
- 프로그램에서 데이터 접근하고 조작하는 것 이외에는 별도의 제어가 없다.

##### 단점
- 데이터간 불일치 발생
	- 중복된 데이터의 변경을 제어하는 것이 어렵다.
- 다수 사용자를 위한 동시성 제어가 제공안된다.
	- 동기화가 되지 않는다.
- 쉬운 쿼리 언어를 제공하지 않는다
- recovery 기능 없다.
- 응용프로그램에서 file 내의 데이터를 수정하는 도중에 강제종료등의 상황에 대처 기능이 없다.
- 데이터의 독립성이 없어서 유지 보수 비용이크다.
	- 파일 구조변경시 독립적이지 않아 종속적이므로 모든 응용프로그램을 수정해야한다.
- 데이터 모델링 개념 부족
- 데이터 무결성 유지가 힘들다.
	- 새로운 제약이 추가,수정,제거가 쉽지가 않다.
- 데이터 공유의 어려움이 있어 생산성이 낮다.

</br>

### 데이터베이스 시스템(DataBase System)

위의 파일 시스템의 단점을 보완해서 나왔다. (현재도 부분적으로 사용하고 있지만) 데이터를 파일 단위로 저장하며 이러한 일들을 처리하기 위한 **독립적인 응용프로그램과 상호 연동이 되어야한다.** 이때의 문제점은 데이터 종속성 문제와 데이터 무결성이다.


#### 데이터베이스의 특징

1. 데이터의 독립성
	- 물리적 독립성: 데이터베이스 사이즈를 늘리거나 성능 향상을 위해 데이터 파일을 늘리거나 새롭게 추가하더라도 관련된 응용프로그램을 수정할 필요가 없다.
    - 논리적 독립성: 데이터베이는 논리적인 구조로 다양한 응용프로그램의 논리적 요구를 만족시켜줄 수있다.
    
2. 데이터의 무결성  
	여러 경로를 통해 잘못된 데이터가 발생하는 경우의 수를 방지하는 기능으로 데이터의 유효성 검사를 통해 데이터의 무결성을 구현하게 된다.

3. 데이터의 보완성  
	연관된 사용자들만 데이터베이스나 데이터베이스 내의 자원에 접근할 수 있도록 계정 관리 또는 접근 권한을 설정함으로써 모든 데이터에 보안을 구현할 수 있다.
    
4. 데이터의 일관성  
	연관된 정보를 논리적인 구조로 관리 함으로써 어떤 하나의 데이터만 변경 했을 경우발생할 수 있는 데이터의 불일치성을 배제할 수 있다. 또한 작업 중 일부 데이터만 변경되어 나머지 데이터와 일치하지 않는 경우의 수를 배제 할 수 있다.
    
5. 데이터 중복 최소화  
	- 데이터베이스는 데이터를 통합해서 관리함으로써 파일 시스템의 단점 중 하나인 자료의 중복과 데이터의 중복성 문제를 해결할 수 있다.
    
> Q) 무결성에 대해서 서술해보세요.

A) 무결성이랑 데이터의 정확성, 일관성, 유효성을 유지하는 것을 말한다. 데이터의 무결성을 유지하기 위해 DBMS에서는 크게 4가지 종류로 구분한다. 

- 엔티티 무결성 : 어떠한 기본키 값도 NULL 값이 될 수 없다.
- 참조 무결성 : 서로 참조 관계에 있는 두 테이블의 데이터는 항상 일관된 값을 유지한다.(Tuple 끼리 참조 될려면 반드시 그 Tuble이 존재해야한다)
- 도메인 무결성 : 테이블에 존재하는 필드의 무결성을 보장하기 위한 것으로 올바른 데이터가 입력되었는지 체크한다.
- 고유 무결성 : 특정 속성에 대해 고유한 값을 가지도록 조건이 주어진 경우 그 속성값은 모두 고유한 값을 가진다.
- NULL 무결성 : 특정 속성값에 NULL 이 올 수 없다는 조건이 주어진 경우 그 속성값은 NULL이 될 수 없다는 제약조건이다.
- Key 무결성 : 한 릴레이션에 최소한 하나의 키가 존재해야하는 제약조건, 중복을 허용하면 안되고 오직 하나의 key값은 하나의 Tuple 만 가져야한다.

> Q) 무결성을 유지하려는 이유는 무엇인가?

A) 무결성이 유지가 되어야 DB에 저장된 데이터 값과 거기에 해당하는 현실 세계의 실제 값이 일치하는지 **신뢰**할 수 있기 때문이다.

</br>
    
#### 데이터베이스 접근의 장점

1. Controlling Redundancy(중복 제어)  

##### 중복성의 문제점
- 중복된 횟수만큼 반복해서 변경
- 새로운 데이터 추가시 양쪽 파일에 추가 즉 메모리 낭비 발생
- 동일한 데이터 포함하는 파일들에서 데이터 불일치 발생

##### Data normalization(데이터 정규화)

각 논리적 데이터는 데이터베이스 내에 오직 한번만 저장되는 것이 가장 이상적이다.  
그러므로 데이터베이스를 사용하면 이런 데이터 정규화를 지킬 수 있다.  

2. Restricting unauthorized access(비인가 접근 제한)

데이터베이스를 공유하는 경우에 **허가받은 사람만 데이터에 접근**가능하다.
접근의 유형을 검색과 갱신으로 구분해서 제어해야한다.  
  
  
이를 위해 DBMS는 보안과 권한 서브시스템을 가진다.

3. Providing persostent storage for program object(영속 저장)

- `Object-oriented DBMS`(객체지향 DBMS)는 지성 기억 공간을 제공한다.
- 데이터베이스에서는 **Impedance minmatch(임피던스 불일치)** 문제를 해결한다. 즉 데이터베이스시스템에서 제공하는 자료구조와 프로그램 언어에서 제공하는 자료구조와 불일치하는 문제를 객체지향언어와 호환성이 있는 자료구조를 제공하므로 이러한 불일치 문제를 해결한다.  

4. 효율적 질의 처리를 위한 저장 구조 제공

일반적으로 데이터베이스는 디스크에 저장되기 때문에, DBMS는 원흐는 레코드를 디스크에서 검색하는 시간을 줄이기 위해 특수한 자료구조와 탐색 기법을 제공해야한다.
- index
- buffering & caching module 제공


### 데이터베이스의 성능

데이터베이스의 성능인 디스크I/O를 어떻게 줄이느냐에서 시작된다. 디스크 I/O란 디스크 드라이브의 플래터(원판)을 돌려서 읽어야 할 데이터가 저장된 위치로 디스크 헤더를 이동시킨 다음 데이터를 읽는 것을 의미한다. 디스크 헤더를 움직여서 읽고 쓸 위치로 옮기는 단계에서 시간이 결정되고 성능은 이 디스크헤더의 위치 이동없이 얼마나 많은 데이터를 한번에 기록하느냐에 따라 결정된다.  
  
그렇기 떄문에 순차 I/O가 랜덤 I/O 보다 빠를 수 밖에 없다. 현실에서 대부분 I/O 작업이 랜덤이고 데이터베이스 쿼리 튜닝은 이 랜덤 I/O 자체를 줄여주는 것이 목적이다.

</br>

## Data Model(데이터 모델)

사용자에게 데이터 저장구조의 세부사항을 은닉함으로써 어느 정도 **데이터 추상화**를 제공하는 도구이다. 이는 사용자에게 데이터를 잘 이해하는데 도움되는 필수적인 특징들만 강조하게 하는 역할을 하게 된다.(사용자의 편의를 위함)  
- Structure(구조)
	- 데이터 타입, 관계, 제약조건등
- Opeartions(연산)
	- retrieve(검색), update(갱신)등 기본연산 집합 포함한다.
    - 사용자 정의 연산도 포함하게 된다.
- Constraints(제약조건)

### 데이터 모델의 분류

- `Coceptual(개념)(High-level, semantic)`
- `Physical(물리적)(Low-level, internal)`
	- 데이터가 컴퓨터의 저장 장치, 특히 하드 디스크에 저장되는ㄱ에 대한 세부 사항을 명시하는 개념을 제공하한다.
- `Implementation(구현, 표현)`
	- 사용자들이 쉽게 이해할 수 있는 개념을 제공한다, 디스크상에서 데이터 저장 구조의 세부사항을 은폐하지만 컴퓨터 시스템에서 직접 구현될 수 있다.
    
    
## Three Schema Architecture

- Internal(Physical) schema - 내부스키마
	- 저장구조 세부사항 및 접근경로 등 물리적 데이터 모델 사용
- Conceptual(Logical) schema - 개념스키마
	- 전체 DB의 구조와 제약조건 기술
   	- 물리적 저장 구조 세부사항 은폐
- External(view level) schema - 외부 스키마
	- 사용자의 응용프로그램 View에 다양하게 서술된다.
    
    
    

